<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Selamat Ulang Tahun ðŸŽ‰</title>
<style>
body{margin:0;height:100vh;overflow:hidden;font-family:Arial,Helvetica,sans-serif;background:radial-gradient(circle,#ffcc70,#c850c0);color:#fff;text-align:center}
.container{position:relative;z-index:2;padding-top:70px}
h1{font-size:2rem;margin:8px 12px}
p{max-width:720px;margin:6px auto}
canvas{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1}
.content{position:relative;z-index:2}
.motivasi{margin-top:18px;font-style:italic;opacity:0.95}
</style>
</head>
<body>
<canvas id="canvas"></canvas>
<div class="content container">
  <h1 id="judul">Selamat Ulang Tahun</h1>
  <p id="pesan"></p>
  <p class="motivasi">"Hidup itu bukan soal seberapa lama, tapi seberapa berarti. Jalani hari ini dengan senyum dan semangat baru!"</p>
</div>

<!-- audio: isi file tipex.mp3 di folder sound/ nanti -->
<audio id="music" loop>
  <source src="sound/tipex.mp3" type="audio/mpeg">
</audio>

<script>
// ambil data dari query string
const params = new URLSearchParams(location.search);
const nama = params.get('nama') ? decodeURIComponent(params.get('nama')) : 'Sahabat';
const umur = params.get('umur') ? decodeURIComponent(params.get('umur')) : '';
const harapan = params.get('harapan') ? decodeURIComponent(params.get('harapan')) : '';

document.getElementById('judul').textContent = `Selamat Ulang Tahun ${nama} ðŸŽ‚`;
document.getElementById('pesan').innerHTML = `Usia kamu sekarang ${umur ? umur + ' tahun' : ''} ðŸŽ‰<br>Doa & harapan: ${harapan}`;

// coba play music (user sudah klik lanjut, interaksi ada -> biasanya bisa autoplay)
const music = document.getElementById('music');
try { music.play(); } catch(e){ /* kalau diblock, user bisa tap screen */ }

// simple fireworks
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let W = canvas.width = innerWidth;
let H = canvas.height = innerHeight;
window.addEventListener('resize', ()=>{W = canvas.width = innerWidth; H = canvas.height = innerHeight;});

function rand(a,b){ return Math.random()*(b-a)+a; }

function Firework(x,y){
  this.p = {x,y};
  this.particles = [];
  for(let i=0;i<80;i++){
    const speed = rand(1,5);
    const angle = rand(0, Math.PI*2);
    this.particles.push({
      x, y,
      vx: Math.cos(angle)*speed,
      vy: Math.sin(angle)*speed,
      life: rand(40,120),
      hue: Math.floor(rand(0,360))
    });
  }
}
let fireworks = [];
function update(){
  ctx.fillStyle = "rgba(0,0,0,0.12)";
  ctx.fillRect(0,0,W,H);
  for(let i=fireworks.length-1;i>=0;i--){
    const fw = fireworks[i];
    fw.particles.forEach(p=>{
      p.x += p.vx; p.y += p.vy; p.vy += 0.02; p.life--;
      ctx.beginPath();
      ctx.fillStyle = `hsl(${p.hue}, 100%, 60%)`;
      ctx.globalAlpha = Math.max(0, p.life/120);
      ctx.arc(p.x,p.y,2,0,Math.PI*2);
      ctx.fill();
    });
    // remove dead
    if(fw.particles.every(p=>p.life<=0)) fireworks.splice(i,1);
  }
  if(Math.random()<0.08) fireworks.push(new Firework(rand(100,W-100), rand(100,H/2)));
  requestAnimationFrame(update);
}
update();
</script>
</body>
</html>
